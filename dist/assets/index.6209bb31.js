(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function c(n,t,e,i){function s(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(u){try{h(i.next(u))}catch(d){o(d)}}function l(u){try{h(i.throw(u))}catch(d){o(d)}}function h(u){u.done?r(u.value):s(u.value).then(a,l)}h((i=i.apply(n,t||[])).next())})}function _t(n,t){const e=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return t?s=>!!e[s.toLowerCase()]:s=>!!e[s]}const C=Array.isArray,mt=Object.prototype.hasOwnProperty,G=(n,t)=>mt.call(n,t),z=n=>typeof n=="symbol",yt=n=>typeof n=="string",lt=n=>n!==null&&typeof n=="object",wt=_t("__proto__"),bt=Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(z),ht=new Set(bt);function K(n){return!!(n&&n["[__isReadonly__]"])}function Ct(n){return!!(n&&n["[__issuperficial__]"])}function St(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}const Y=n=>yt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Et=n=>{const t=parseFloat(n);return isNaN(t)?n:t},xt=(n,t)=>!Object.is(n,t);function M(n){return!!(n&&n.__isReference__===!0)}function Dt(n){return n["[__skip__]"]||!Object.isExtensible(n)?0:St(g.toRawType(n))}const kt=Object.prototype.toString,I=n=>g.toTypeString(n)==="[object Map]",g={toRaw(n){const t=n&&n["[__raw__]"];return t?g.toRaw(t):n},toReadonlyReactive(n){return void 0},toTypeString(n){return kt.call(n)},toRawType(n){return g.toTypeString(n).slice(8,-1)}};let Tt;function At(n,t=Tt){t&&t.active&&t.effects.push(n)}let L=0,x=1;var k=!0;const $=30;let y;function ct(n){k=n}const ut=n=>{const t=new Set(n);return t.w=0,t.n=0,t},ft=n=>(n.w&x)>0,dt=n=>(n.n&x)>0,Mt=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=x},Lt=n=>{const{deps:t}=n;if(t.length){let e=0;for(let i=0;i<t.length;i++){const s=t[i];ft(s)&&!dt(s)?s.delete(n):t[e++]=s,s.w&=~x,s.n&=~x}t.length=e}};function X(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}class Pt{constructor(t){this.directive=t,this.active=!0,this.deps=[],this.parent=void 0,this.isInstalled=!1,At(this)}_call(t,e){return c(this,void 0,void 0,function*(){if(!this.active)return e(t);this.active=!0;let i=y,s=k;for(;i;){if(i===this)return;i=i.parent}try{return this.parent=y,y=this,k=!0,x=1<<++L,L<=$?Mt(this):X(this),e(t)}finally{L<=$&&Lt(this),x=1<<--L,y=this.parent,k=s,this.parent=void 0,this.deferStop&&this.stop(null,null)}})}run(t){return c(this,void 0,void 0,function*(){this.isInstalled?this.directive.update&&this._call(null,this.directive.update):this.directive.start&&this._call(null,this.directive.start)})}push(t){return c(this,void 0,void 0,function*(){this.directive.push&&this._call(t,this.directive.push)})}splice(t){return c(this,void 0,void 0,function*(){this.directive.splice&&this._call(t,this.directive.splice)})}slice(t){return c(this,void 0,void 0,function*(){this.directive.slice&&this._call(t,this.directive.slice)})}pop(t){return c(this,void 0,void 0,function*(){this.directive.pop&&this._call(t,this.directive.pop)})}shift(t){return c(this,void 0,void 0,function*(){this.directive.shift&&this._call(t,this.directive.shift)})}unshift(t){return c(this,void 0,void 0,function*(){this.directive.unshift&&this._call(t,this.directive.unshift)})}set(t){return c(this,void 0,void 0,function*(){this.directive.set&&this._call(t,this.directive.set)})}reverse(t){return c(this,void 0,void 0,function*(){this.directive.reverse&&this._call(t,this.directive.reverse)})}setup(t,e){return c(this,void 0,void 0,function*(){this.directive.setup&&this.directive.setup(t,e)})}stop(t,e){return c(this,void 0,void 0,function*(){y===this?this.deferStop=!0:this.active&&(X(this),this.active=!1)})}remove(t){t&&Object.keys(t).forEach(e=>{typeof t[e]=="object"&&this.remove(t[e]),w.delete(t[e]),w.delete(g.toRaw(t[e]))}),w.delete(g.toRaw(t)),w.delete(t)}}function j(n,t,e){if(k&&y){window.tmap=w;var i=y;let s=w.get(n);s||w.set(n,s=new Map);let r=s.get(e);r||s.set(e,r=ut()),Rt(r),i.isInstalled===!1&&i.setup&&i.setup(Z(n),e)}}function Rt(n){let t=!1;L<=$?dt(n)||(n.n|=x,t=!ft(n)):t=!n.has(y),t&&y&&(n.has(y)||n.add(y),y.deps.push(n))}function P(n,t,e,i,s,r){var o=e,a=e,l=w.get(n);if(!l)return;let h=[];if(t==="clear")h=[...l.values()];else if(t==="modify")o="modify",h.push(l.get("length")),a="modify";else if(o==="length"&&C(n))l.forEach((u,d)=>{(d==="length"||d>=Et(i))&&h.push(u)});else switch(o!==void 0&&h.push(l.get(o)),t){case"add":C(n)?Y(o):(h.push(l.get(O)),I(n)&&h.push(l.get(Q)));break;case"delete":C(n)||(h.push(l.get(O)),I(n)&&h.push(l.get(Q)));break;case"set":I(n)&&h.push(l.get(O));break}if(h.length===1)h[0]&&q(h[0],a);else{const u=[];for(const d of h)d&&u.push(...d);q(ut(u),a)}}function q(n,t){const e=C(n)?n:[...n];for(const i of e)Nt(i,t)}function Nt(n,t){n!==y&&n.run(t)}function b(n){const t=new Pt(n),e=t.run.bind(t);return e.effect=t,t.run(),e}const pt=[];function v(){pt.push(k),ct(!1)}function _(){const n=pt.pop();ct(n===void 0?!0:n)}function gt(n){n&&(Object.keys(n).forEach(t=>{try{typeof n[t]=="object"&&n[t]["[__isReactive__]"]&&gt(n[t])}catch{}w.delete(n[t]),w.delete(g.toRaw(n[t]))}),w.delete(g.toRaw(n)),w.delete(n))}const J=Ot();function Ot(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const i=g.toRaw(this);if(Array.isArray(this))for(let r=0,o=this.length;r<o;r++)j(i,"get",r+"");const s=i[t](...e);return s===-1||s===!1?i[t](...e.map(g.toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){v();const i=g.toRaw(this)[t].apply(this,e);_();try{return i}catch{}finally{window.clearTimeout(this.breaker),this.breaker=window.setTimeout(()=>c(this,void 0,void 0,function*(){yield new Promise(s=>{s();const r=g.toRaw(this);P(r,"set","length")})}),0)}}}),["reverse"].forEach(t=>{n[t]=function(...e){v();const i=g.toRaw(this)[t].apply(this,e);_();try{return i}catch{}finally{const s=g.toRaw(this);P(s,"modify","length")}}}),n}function Ht(n=!1,t=!1){return function(i,s,r){if(s==="[__isReactive__]")return!n;if(s==="[__isReadonly__]")return n;if(s==="[__issuperficial__]")return t;if(s==="[__raw__]"&&r===vt.get(i))return i;if(s==="context")return p.current;const o=C(i);if(!n&&o&&G(J,s))return Reflect.get(J,s,r);const a=Reflect.get(i,s,r);return(z(s)?ht.has(s):wt(s))||(n||j(i,"get",s),t)?a:M(a)?o&&Y(s)?a:a.value:lt(a)?n?g.toReadonlyReactive(a):Z(a,i):a}}function Ft(n=!1){return function(e,i,s,r){let o=e[i];if(K(o)&&M(o)&&!M(s))return!1;if(!n&&(!Ct(s)&&!K(s)&&(o=g.toRaw(o),s=g.toRaw(s)),!C(e)&&M(o)&&!M(s)))return o.value=s,!0;if(C(s)&&C(e[i])){var a=e[i];w.delete(a)}const l=C(e)&&Y(i)?Number(i)<e.length:G(e,i),h=Reflect.set(e,i,s,r);try{return h}catch(u){return console.error(u),h}finally{e===g.toRaw(r)&&(l?xt(s,o)&&(Array.isArray(e)?i==="length"&&P(e,"set",i,s):P(e,"set",i,s)):P(e,"add",i,s))}}}function jt(n=!1){return function(e,i){return G(e,i),e[i],Reflect.deleteProperty(e,i)}}function It(){return function(t,e){const i=Reflect.has(t,e);return(!z(e)||!ht.has(e))&&j(t,"has",e),i}}function Vt(){return function(t){return j(t,"iterate",C(t)?"length":O),Reflect.ownKeys(t)}}class W{constructor(t){this.root=t,this.get=Ht(!1,!1),this.set=Ft(!1),this.has=It(),this.deleteProperty=jt(),this.ownKeys=Vt()}}const vt=new WeakMap;new W;const O=Symbol(""),Q=Symbol(""),w=new WeakMap;function Bt(n,t,e,i,s,r,o){if(!lt(n)||n["[__raw__]"]&&!(t&&n["[__isReactive__]"]))return n;const a=s.get(n);if(a)return a;const l=Dt(n);if(l===0)return n;const h=new Proxy(n,l===2?i:e);return s.set(n,h),Object.keys(h).includes("_")&&typeof h._=="function"&&h._(),h}function Z(n,t,e){return K(n)?n:Bt(n,!1,new W(t),new W(t),vt)}const R=new Map;class Kt{subscribe(t,e){return R.has(e)||R.set(e,t),()=>{R.delete(e)}}notify(t){R.forEach((e,i)=>{e===t&&i()})}}class $t{constructor(){this.type="function"}}class Wt{constructor(){this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){this._settings!=null&&this._settings.callback.call(this._source)}update(){this._settings!=null&&(this._source.isDisposed||this._source.element===null||this._settings.callback.call(this._source))}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))}}class Ut{constructor(){this.type="function"}}class Gt{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var e=this._settings.Property[this._settings.FieldName];return e},this._source.element instanceof HTMLElement||this._source.element instanceof Element?t=this._settings.callback():t=this._settings.callback());break;case"function":this._source.element instanceof HTMLElement||this._source.element instanceof Element?t=this._settings.callback():t=this._settings.callback();break}typeof t=="function"&&(t=t()),t==null&&(t=""),this._source.element instanceof HTMLElement||this._source.element instanceof Element?this._source.element.innerHTML=t:this._source.element.textContent=t}}update(){if(this._settings!=null){var t=this._settings.callback();this._source.isDisposed||this._source.element===null||(t==null&&(t=""),this._source.element instanceof HTMLElement||this._source.element instanceof Element?this._source.element.innerHTML=t:this._source.element.textContent=t)}}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))}}class zt{constructor(){this.type="function",this.fragment=null}}class Yt{constructor(){this.id=null,this.isArray=!0,this.oldCollection=[],this.collection=[],this.fx=null,this._settings=null,this._source=null,this.inits=!1,this.wm=new Map,this.setupCompleted=!1,this.updateAsync=this.updateAsync.bind(this),this.push=this.push.bind(this)}start(t){if(this._settings!=null){if(this.inits)return this.update(t);switch(this.inits=!0,this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var e=this._settings.Property[this._settings.FieldName];return e},this._settings.oldValue=this._settings.callback());break;case"function":this._settings.oldValue=this._settings.callback();break}typeof this._settings.oldValue=="function"&&(this._settings.oldValue=this._settings.oldValue()),this._settings.oldValue.forEach((e,i)=>{var s=this.build(e,i);s.index=i,s.isStart=!0,this._source.controls.insert(i,s)})}}update(t){var e=this;e.updateAsync.call(e,t)}updateAsync(t){return c(this,void 0,void 0,function*(){var e=this._settings,i=this._source;if(i.isDisposed){this.fx&&this.fx.stop(e.Property,e.FieldName),yield this.dispose(e,i);return}if(e!=null&&!(i.isDisposed||i.element===null)){var s=e.callback();if(typeof s=="function"&&(s=s()),Array.isArray(s)&&s.length==0?(this.wm.clear(),yield this._source.clear()):s==null?(this.wm.clear(),yield this._source.clear()):t==="modify"&&(this.wm.clear(),this._source.controls.forEach(o=>{o.dispose()}),s.forEach((o,a)=>{var l=this.build(o,a);l.index=a,l.isStart=!0,this._source.controls.insert(a,l)})),v(),Array.isArray(s)&&(yield this._source.controls.filter(a=>!s.includes(a.__key__)).forEach(a=>c(this,void 0,void 0,function*(){this.wm.delete(a.__key__),yield a.dispose()}))),_(),i.isDisposed){this.fx&&this.fx.stop(e.Property,e.FieldName),this.wm.clear(),yield this.dispose(e,i);return}var r=!1;this._settings.oldValue.length==0&&(r=!0),s&&(t==="modify"||s.forEach((o,a)=>c(this,void 0,void 0,function*(){if(typeof o<"u"){if(i.isDisposed){this.fx&&this.fx.stop(e.Property,e.FieldName),yield this.dispose(e,i);return}if(this.wm.has(o)){var h=this.wm.get(o);t==="modify"?(h.element.remove(),i.controls.remove(h),i.controls.insert(a,h)):h.index=a}else{var l=this.build(o,a);l.index=a,l.isStart=r,i.controls.insert(a,l)}}}))),v(),this._settings.oldValue=s,_()}})}setup(t,e){if(this._source.isDisposed){this.fx&&this.fx.stop(this._settings.Property,this._settings.FieldName),this.dispose(this._settings,this._source);return}v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect}push(t){return c(this,void 0,void 0,function*(){var e=this._settings,i=this._source;if(i.isDisposed){this.fx&&this.fx.stop(e.Property,e.FieldName),yield this.dispose(e,i);return}if(e!=null&&!(i.isDisposed||i.element===null)){var s=e.callback();s.forEach((r,o)=>{if(!this.wm.has(r)){var a=this.build(r,o);a.index=o,a.isStart=!1,i.controls.insert(o,a)}})}})}build(t,e){var i=this._settings.render(t,e);return g.toRaw(t),v(),this.wm.set(t,i),i.index=e,i.__key__=t,_(),i}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||!t.Property||(this.wm.clear(),this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))}splice(t){return c(this,void 0,void 0,function*(){t&&t.forEach(e=>{if(this.wm.has(e)){var i=this.wm.get(e);i&&!i.isDisposed&&(i.dispose(),this.wm.delete(e))}})})}}class Zt{constructor(){this.type="function"}}class Xt{constructor(){this.id=null,this.isArray=!1,this.fx=null,this.setupCompleted=!1,this._settings=null,this._source=null,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this)}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}start(){if(this._settings!=null){if(this.setupCompleted)return this.update();switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var r=this._settings.Property[this._settings.FieldName];return r},this._settings.oldValue=this._settings.callback());break;case"function":this._settings.oldValue=this._settings.callback();break}var t="";if(this._source.element&&(t=this._source.element.tagName),!(this._settings.oldValue==null||this._settings.oldValue==null)){switch(t){case"select":case"SELECT":var e=this._source.element;(this._settings.oldValue!==void 0||this._settings.oldValue!==null)&&(e.value=this._settings.oldValue),this._source.addHandler("change",(r,o)=>{this._settings.oldValue!=e.value&&(this._settings.Property[this._settings.FieldName]=e.value,this._settings.oldValue=e.value)});break;default:var i=this._source.element;if(i.type=="checkbox"||i.type=="radio"){var s=this._source.element;this._settings.oldValue!==void 0||this._settings.oldValue!==null?s.checked=this._settings.oldValue:s.checked=!1,this._source.addHandler("input",(r,o)=>{var a=o.target.checked;this._settings.Property[this._settings.FieldName]=a,this._settings.oldValue=a})}else(this._settings.oldValue!==void 0||this._settings.oldValue!==null)&&(this._source.element.value=this._settings.oldValue),this._source.addHandler("input",(r,o)=>{var a=o.target.value;this._settings.oldValue!=a&&((typeof this._settings.oldValue=="number"||typeof a=="number")&&(a=parseFloat(a)),this._settings.Property[this._settings.FieldName]=a,this._settings.oldValue=a)});break}this.setupCompleted=!0}}}update(){if(this._settings!=null){if(!this.setupCompleted)return this.setupCompleted;var t=this._settings.callback();if(t!=null&&!(this._source.isDisposed||this._source.element===null))switch(this._source.element.tagName){case"input":case"INPUT":var e=this._source.element;e.type=="checkbox"||e.type=="radio"?typeof this._settings.Property[this._settings.FieldName]=="boolean"?this._source.element.checked=t:(this._source.element.checked=!1,this._source.element.value=t):this._source.element.value=t;break;case"button":case"BUTTON":var i=this._source.element;i.value=t;break;case"select":case"SELECT":this._source.element.value=t;break;case"option":case"OPTION":this._source.element.value=t;break;default:this._source.element.value=t;break}}}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this._source=null,this._settings=null,this.fx=null,this.setupCompleted=null))}}class qt{constructor(){this.type="function"}}class Jt{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var i=this._settings.Property[this._settings.FieldName];return i},t=this._settings.callback());break;case"function":t=this._settings.callback();break}var e=!1;typeof t=="number"?e=t>0:typeof t=="boolean"?e=t:t===void 0?e=!1:typeof t=="string"?t.length>0?e=!0:e=!1:Array.isArray(t)?t!=null&&t.length>0?e=!0:e=!1:typeof t=="object"?t!=null&&Object.keys(t).length>0?e=!0:e=!1:t==null&&(e=!1),e===!0&&this._source.reload&&this._source.reload()}}update(){}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){return c(this,void 0,void 0,function*(){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))})}}class Qt{constructor(){this.type="function"}}class te{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var s=this._settings.Property[this._settings.FieldName];return s},this._source.element instanceof HTMLElement||this._source.element instanceof Element?t=this._settings.callback():t=this._settings.callback());break;case"function":this._source.element instanceof HTMLElement||this._source.element instanceof Element?t=this._settings.callback():t=this._settings.callback();break}if(typeof t=="function"&&(t=t()),Array.isArray(t)){var e="";t.forEach(s=>{e=`${e} ${s}`}),this._source.element.textContent=e}else if(typeof t=="object"){var i="";Object.keys(t).forEach(s=>{i=`${i} ${t[s]}`}),this._source.element.textContent=i}else t==null&&(t=""),this._source.element.textContent=t}}update(){if(this._settings!=null&&!(this._source.isDisposed||this._source.element===null)){var t=this._settings.callback();t==null&&(t=""),this._source.element instanceof HTMLElement||this._source.element instanceof Element?this._source.element.textContent=t:this._source.element.textContent=this._settings.callback()}}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){return c(this,void 0,void 0,function*(){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))})}}class ee{constructor(){this.type="function"}}class ie{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var l=this._settings.Property[this._settings.FieldName];return l},this._settings.oldValue=this._settings.callback());break;case"function":this._settings.oldValue=this._settings.callback();break}var t="";switch(this._source.element&&(t=this._source.element.tagName),t){case"select":case"SELECT":var e=this._source.element;this._source.addHandler("change",(l,h)=>{this._settings.oldValue!=e.value&&(this._settings.Property[this._settings.FieldName]=e.value,this._settings.oldValue=e.value)}),e.value=this._settings.oldValue;break;case"option":case"OPTION":var i=this._source.element;i.value=this._settings.oldValue;break;case"optiongroup":case"OPTIONGROUP":var s=this._source.element;s.textContent=this._settings.oldValue;break;default:var r=this._source.element;if(r.type=="checkbox"||r.type=="radio"){var o=this._source.element;o.checked=this._settings.oldValue}else{var a=this._source.element;a.value=this._settings.oldValue}break}}}update(){if(this._settings!=null){var t=this._settings.callback();if(!(this._source.isDisposed||this._source.element===null))switch(this._source.element.tagName){case"input":case"INPUT":var e=this._source.element;e.type=="checkbox"||e.type=="radio"?typeof this._settings.Property[this._settings.FieldName]=="boolean"?this._source.element.checked=t:this._source.element.value=t:this._source.element.value=t;break;case"button":case"BUTTON":var i=this._source.element;i.value=t;break;case"select":case"SELECT":this._source.element.value=t;break;case"option":case"OPTION":this._source.element.value=t;break;default:this._source.element.innerHTML=t;break}}}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){return c(this,void 0,void 0,function*(){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))})}}class tt{constructor(){this.type="function"}}class se{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var i=this._settings.Property[this._settings.FieldName];return i},t=this._settings.callback());break;case"function":t=this._settings.callback();break}var e=!1;typeof t=="number"?e=t>0:typeof t=="boolean"?e=t:t===void 0?e=!1:typeof t=="string"?t.length>0?e=!0:e=!1:typeof t=="object"?t!=null&&Object.keys(t).length>0?e=!0:e=!1:t==null&&(e=!1),e===!0?this._source.show():this._source.hide()}}update(){}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){return c(this,void 0,void 0,function*(){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))})}}class ne{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var i=this._settings.Property[this._settings.FieldName];return i},t=this._settings.callback());break;case"function":t=this._settings.callback();break}var e=!1;typeof t=="number"?e=t>0:typeof t=="boolean"?e=t:t===void 0?e=!1:typeof t=="string"?t.length>0?e=!0:e=!1:typeof t=="object"?t!=null&&Object.keys(t).length>0?e=!0:e=!1:t==null&&(e=!1),this._source.iswait=e}}update(){this.start()}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){return c(this,void 0,void 0,function*(){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))})}}class re{constructor(){this.type="function",this.attributes=new Set}}class oe{constructor(){this.id=null,this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t;switch(this._settings.type){case"expression":this._settings.Property&&this._settings.FieldName&&(this._settings.callback=()=>{var i=this._settings.Property[this._settings.FieldName];return i},t=this._settings.callback());break;case"function":t=this._settings.callback();break}typeof t=="function"&&(t=t());var e=!1;typeof t=="number"?e=t>0:typeof t=="boolean"?e=t:t===void 0?e=!1:typeof t=="string"?t.length>0?e=!0:e=!1:typeof t=="object"?t!=null&&Object.keys(t).length>0?e=!0:e=!1:t==null&&(e=!1),e===!0&&this._settings.attributes.forEach(i=>{this._source.element[i]&&this._source.element[i]()})}}update(){}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){t!=null&&(this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect)}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))}}class ae{constructor(){this.type="function"}}class le{constructor(){this.isArray=!1,this.fx=null,this._settings=null,this._source=null}start(){if(this._settings!=null){var t=this._settings.logicalFn();if(this._prevControl!=null)if(typeof t=="boolean")if(t){var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=this._settings.callback(t),(this._prevControl===void 0||this._prevControl===null)&&(this._prevControl=new f(document.createComment(""),{})),this._source.controls.insert(e,this._prevControl)}else{var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=new f(document.createComment(""),{}),this._source.controls.insert(e,this._prevControl)}else{var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=this._settings.callback(t),(this._prevControl===void 0||this._prevControl===null)&&(this._prevControl=new f(document.createComment(""),{})),this._source.controls.insert(e,this._prevControl)}else typeof t=="boolean"?(this._prevControl=new f(document.createComment(""),{}),this._source.controls.add(this._prevControl)):(this._prevControl=this._settings.callback(t),(this._prevControl===void 0||this._prevControl===null)&&(this._prevControl=new f(document.createComment(""),{})),this._source.controls.add(this._prevControl))}}update(){if(this._settings!=null&&!(this._source.isDisposed||this._source.element===null)){var t=this._settings.logicalFn();if(typeof t=="boolean")if(t){var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=this._settings.callback(t),(this._prevControl===void 0||this._prevControl===null)&&(this._prevControl=new f(document.createComment(""),{})),this._source.controls.insert(e,this._prevControl)}else{var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=new f(document.createComment(""),{}),this._source.controls.insert(e,this._prevControl)}else{var e=this._source.controls.indexOf(this._prevControl);this._prevControl.dispose(),this._prevControl=this._settings.callback(t),(this._prevControl===void 0||this._prevControl===null)&&(this._prevControl=new f(document.createComment(""),{})),this._source.controls.insert(e,this._prevControl)}}}setup(t,e){v(),this._settings.Property=t,this._settings.FieldName=e,_()}init(t,e){this._settings=t,this._source=e,this.start=this.start.bind(this),this.update=this.update.bind(this),this.dispose=this.dispose.bind(this),this.setup=this.setup.bind(this),this.fx=b(this).effect}dispose(t,e){t!=null&&(e.isDisposed||e.element===null||(this.fx&&(this.fx.stop(t.Property,t.FieldName),this.fx.remove(e.model)),this.fx=null,this._source=null,this._settings=null))}}class he{constructor(t){this.owner=t,this.attributeDirectives=new Map,this.Configuration={TextSettings:null,ModelSettings:null,LoopSettings:null,HtmlSettings:null,EffectSettings:null,ValueSettings:null,DisplaySettings:null,ReloadSettings:null,WaitSettings:null,LogicDirectiveSettings:null}}dispose(){this.Configuration.LoopSettings&&this.loopDirective&&this.loopDirective.dispose(this.Configuration.LoopSettings,this.Configuration.LoopSettings.fragment),this.Configuration.TextSettings&&this.textDirective&&this.textDirective.dispose(this.Configuration.TextSettings,this.owner),this.Configuration.ModelSettings&&this.modelDirective&&this.modelDirective.dispose(this.Configuration.ModelSettings,this.owner),this.Configuration.HtmlSettings&&this.htmlDirective&&this.htmlDirective.dispose(this.Configuration.HtmlSettings,this.owner),this.Configuration.EffectSettings&&this.effectDirective&&this.effectDirective.dispose(this.Configuration.EffectSettings,this.owner),this.Configuration.ValueSettings&&this.valueDirective&&this.valueDirective.dispose(this.Configuration.ValueSettings,this.owner),this.Configuration.DisplaySettings&&this.displayDirective&&this.displayDirective.dispose(this.Configuration.DisplaySettings,this.owner),this.Configuration.ReloadSettings&&this.relloadDirective&&this.relloadDirective.dispose(this.Configuration.ReloadSettings,this.owner),this.Configuration.WaitSettings&&this.waitDirective&&this.waitDirective.dispose(this.Configuration.WaitSettings,this.owner),this.Configuration.LogicDirectiveSettings&&this.logicDirective&&this.logicDirective.dispose(this.Configuration.LogicDirectiveSettings,this.owner),this.attributeDirectives.forEach((t,e)=>{t.dispose(e,this.owner)})}hasUsedState(){return!!(this.Configuration.LoopSettings&&this.loopDirective||this.Configuration.TextSettings&&this.textDirective||this.Configuration.ModelSettings&&this.modelDirective||this.Configuration.HtmlSettings&&this.htmlDirective||this.Configuration.EffectSettings&&this.effectDirective||this.Configuration.ValueSettings&&this.valueDirective||this.Configuration.DisplaySettings&&this.displayDirective||this.Configuration.ReloadSettings&&this.relloadDirective||this.Configuration.WaitSettings&&this.waitDirective||this.Configuration.LogicDirectiveSettings&&this.logicDirective||this.attributeDirectives.size>0)}init(){return c(this,void 0,void 0,function*(){this.Configuration.LoopSettings&&this.loopDirective&&this.loopDirective.init(this.Configuration.LoopSettings,this.Configuration.LoopSettings.fragment),this.Configuration.TextSettings&&this.textDirective&&this.textDirective.init(this.Configuration.TextSettings,this.owner),this.Configuration.ModelSettings&&this.modelDirective&&this.modelDirective.init(this.Configuration.ModelSettings,this.owner),this.Configuration.HtmlSettings&&this.htmlDirective&&this.htmlDirective.init(this.Configuration.HtmlSettings,this.owner),this.Configuration.EffectSettings&&this.effectDirective&&this.effectDirective.init(this.Configuration.EffectSettings,this.owner),this.Configuration.ValueSettings&&this.valueDirective&&this.valueDirective.init(this.Configuration.ValueSettings,this.owner),this.Configuration.DisplaySettings&&this.displayDirective&&this.displayDirective.init(this.Configuration.DisplaySettings,this.owner),this.Configuration.ReloadSettings&&this.relloadDirective&&this.relloadDirective.init(this.Configuration.ReloadSettings,this.owner),this.Configuration.LogicDirectiveSettings&&this.logicDirective&&this.logicDirective.init(this.Configuration.LogicDirectiveSettings,this.owner),this.attributeDirectives.forEach((t,e)=>{t.init(e,this.owner)})})}update(t,e,i){return c(this,void 0,void 0,function*(){console.error("UPDATE")})}setup(t,e){}text(){return this.Configuration.TextSettings=new Qt,this.textDirective=new te,arguments.length===2?(this.Configuration.TextSettings.Property=arguments[0],this.Configuration.TextSettings.FieldName=arguments[1],this.Configuration.TextSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.TextSettings.callback=arguments[0],this.Configuration.TextSettings.type="function"),this.owner.isRendered&&this.Configuration.TextSettings&&this.textDirective&&this.textDirective.init(this.Configuration.TextSettings,this.owner),this}html(){return this.Configuration.HtmlSettings=new Ut,this.htmlDirective=new Gt,arguments.length===2?(this.Configuration.HtmlSettings.Property=arguments[0],this.Configuration.HtmlSettings.FieldName=arguments[1],this.Configuration.HtmlSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.HtmlSettings.callback=arguments[0].bind(this.owner),this.Configuration.HtmlSettings.type="function"),this.owner.isRendered&&this.Configuration.HtmlSettings&&this.htmlDirective&&this.htmlDirective.init(this.Configuration.HtmlSettings,this.owner),this}model(){return this.Configuration.ModelSettings=new Zt,this.modelDirective=new Xt,arguments.length===2?(this.Configuration.ModelSettings.Property=arguments[0],this.Configuration.ModelSettings.FieldName=arguments[1],this.Configuration.ModelSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.ModelSettings.callback=arguments[0],this.Configuration.ModelSettings.type="function"),this.owner.isRendered&&this.Configuration.ModelSettings&&this.modelDirective&&this.modelDirective.init(this.Configuration.ModelSettings,this.owner),this}value(){return this.Configuration.ValueSettings=new ee,this.valueDirective=new ie,arguments.length===2?(this.Configuration.ValueSettings.Property=arguments[0],this.Configuration.ValueSettings.FieldName=arguments[1],this.Configuration.ValueSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.ValueSettings.callback=arguments[0],this.Configuration.ValueSettings.type="function"),this.owner.isRendered&&this.Configuration.ValueSettings&&this.valueDirective&&this.valueDirective.init(this.Configuration.ValueSettings,this.owner),this}loop(){this.Configuration.LoopSettings=new zt,this.loopDirective=new Yt,arguments.length===3?(this.Configuration.LoopSettings.Property=arguments[0],this.Configuration.LoopSettings.FieldName=arguments[1],this.Configuration.LoopSettings.render=arguments[2],this.Configuration.LoopSettings.type="expression"):arguments.length===2&&(typeof arguments[0]=="function"?(this.Configuration.LoopSettings.callback=arguments[0],this.Configuration.LoopSettings.render=arguments[1],this.Configuration.LoopSettings.type="function"):Array.isArray(arguments[0])&&(this.Configuration.LoopSettings.callback=()=>arguments[0],this.Configuration.LoopSettings.render=arguments[1],this.Configuration.LoopSettings.type="function"));var t=new T(null,{});return this.Configuration.LoopSettings.fragment=t,this.owner.controls.add(t),this.owner.isRendered&&this.Configuration.LoopSettings&&this.loopDirective&&this.loopDirective.init(this.Configuration.LoopSettings,t),this}effect(t){return this.Configuration.EffectSettings=new $t,this.effectDirective=new Wt,this.Configuration.EffectSettings.callback=t,this.Configuration.EffectSettings.type="function",this.owner.isRendered&&this.Configuration.EffectSettings&&this.effectDirective&&this.effectDirective.init(this.Configuration.EffectSettings,this.owner),this}display(){return this.Configuration.DisplaySettings=new tt,this.displayDirective=new se,arguments.length===2?(this.Configuration.DisplaySettings.Property=arguments[0],this.Configuration.DisplaySettings.FieldName=arguments[1],this.Configuration.DisplaySettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.DisplaySettings.callback=arguments[0],this.Configuration.DisplaySettings.type="function"),this.owner.isRendered&&this.Configuration.DisplaySettings&&this.displayDirective&&this.displayDirective.init(this.Configuration.DisplaySettings,this.owner),this}reload(){return this.Configuration.ReloadSettings=new qt,this.relloadDirective=new Jt,arguments.length===2?(this.Configuration.ReloadSettings.Property=arguments[0],this.Configuration.ReloadSettings.FieldName=arguments[1],this.Configuration.ReloadSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.ReloadSettings.callback=arguments[0],this.Configuration.ReloadSettings.type="function"),this.owner.isRendered&&this.Configuration.ReloadSettings&&this.relloadDirective&&this.relloadDirective.init(this.Configuration.ReloadSettings,this.owner),this}wait(){return this.Configuration.WaitSettings=new tt,this.waitDirective=new ne,arguments.length===2?(this.Configuration.WaitSettings.Property=arguments[0],this.Configuration.WaitSettings.FieldName=arguments[1],this.Configuration.WaitSettings.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(this.Configuration.WaitSettings.callback=arguments[0],this.Configuration.WaitSettings.type="function"),this}focus(){var t=new re;t.attributes.add("focus");var e=new oe;return arguments.length===2?(t.Property=arguments[0],t.FieldName=arguments[1],t.type="expression"):arguments.length===1&&typeof arguments[0]=="function"&&(t.callback=arguments[0],t.type="function"),this.attributeDirectives.set(t,e),this}logic(t,e){return this.Configuration.LogicDirectiveSettings=new ae,this.logicDirective=new le,this.Configuration.LogicDirectiveSettings.logicalFn=t,this.Configuration.LogicDirectiveSettings.callback=e,this.Configuration.LogicDirectiveSettings.type="function",this}computed(t){var e=t();if(Array.isArray(e))e.forEach(s=>{if(typeof s=="string"){var r=new f("text");r.setText(s),this.owner.controls.add(r)}else this.owner.controls.add(s)});else if(typeof e=="string"){var i=new f("text");i.setText(e),this.owner.controls.add(i)}else this.owner.controls.add(e)}}class ce{}class et extends Array{constructor(){super(...arguments),this._map=new Map}add(t){this._map.set(t,t);var e=this.push(t)-1;try{return e}finally{this.ItemAdded!=null&&this.ItemAdded(t)}}addBefore(t){this._map.set(t,t);var e=this.unshift(t)-1;return this.ItemAddedBefore!=null&&this.ItemAddedBefore(t),e}insert(t,e){this._map.set(e,e);var i=this.splice(t,0,e);return this.ItemSplice!=null&&this.ItemSplice(t,e),i}remove(t){this._map.delete(t);var e=this.indexOf(t);this.splice(e,1)}item(t){return this._map.get(t)}has(t){return this._map.has(t)}clear(){this.splice(0),this._map.clear()}itemIndex(t){return this[t]}}class ue{constructor(){this.__list=[],this._map=new Set}Dispose(){this.__list=[]}Add(t){this._map.add(t);var e=this.__list.push(t)-1;return this.ItemAdded!=null&&this.ItemAdded(t),e}AddBefore(t){this._map.add(t);var e=this.__list.unshift(t)-1;return this.ItemAddedBefore!=null&&this.ItemAddedBefore(t),e}Insert(t,e){this._map.add(e);var i=this.__list.splice(t,0,e);return this.ItemSplice!=null&&this.ItemSplice(t,e),i}get items(){return this.__list}clear(){return this._map.clear(),this.__list.splice(0),this.__list=[],this.__list}get count(){return this.__list.length}remove(t){return this._map.delete(t),this.__list.splice(this.__list.indexOf(t),1),t=null,[]}indexOf(t){return this.__list.indexOf(t)}FindFromKey(t,e){return this.__list.filter(i=>i[t]===e)}removeIndex(t){var e=this.__list.splice(t,1);return e.forEach(i=>{this._map.delete(i)}),e}has(t){return this._map.has(t)}item(t){return this.__list[t]}forEach(t){var e;(e=this.__list)===null||e===void 0||e.forEach(t)}ReverseClone(){return this.__list.reverse()}filter(t){return this.__list.filter(t)}}class F{constructor(){this.__values=new ue}Add(t,e){var i=new ce;i.Key=t,i.value=e;var s=this.__values.Add(i);return this.OnItemAdded!=null&&this.OnItemAdded(i.Key,i.value),s}has(t){return!!this.filter(e=>e.Key==t)[0]}item(t){return this.filter(e=>e.Key==t)[0]}removeIndex(t){var e=this.__values.removeIndex(t-1);return e}remove(t){var e=this.__values.filter(i=>i.Key==t);e.forEach(i=>{this.__values.remove(i)})}clear(){this.__values.clear()}forEach(t){this.__values.forEach(t)}get values(){return this.__values}filter(t){return this.__values.items.filter(t)}find(t,e){return this.__values.items.find(t)}}class fe{constructor(){this.resume=!0,this.redirect=""}}class de{constructor(t){this.attributes=[],this._parent=t}add(t){return typeof t=="object"?Object.keys(t).forEach(e=>{if(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element||this._parent.element instanceof SVGElement||this._parent.element instanceof SVGAElement){var i=t[e];i&&i.toLowerCase&&i.toLowerCase()==="preserveaspectratio"&&(i="preserveAspectRatio");var s=this;if(typeof i=="function")this._parent.bind.effect(()=>{var o=i();s._parent.element.setAttribute(e,o)});else if(typeof i=="boolean")i==!0?this._parent.element.setAttribute(e,""):this._parent.element.removeAttribute(e);else if(e==="class"||e==="className"||e==="classname")this._parent.class.add(i);else if(i==null||i==="")this._parent.element.setAttribute(e,"");else try{this._parent.element.setAttribute(e,i)}catch{console.error(e,i)}}else if(!this.attributes.find(o=>o.name===e))this.attributes.push({name:e,value:t[e]});else{var r=this.attributes.find(o=>o.name===e);r!==void 0&&(r.value=t[e])}}):typeof t=="string"&&(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.setAttribute(t,""),this._parent}remove(t){return(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.removeAttribute(t),this._parent}has(t){return this._parent.element instanceof HTMLElement||this._parent.element instanceof Element?this._parent.element.hasAttribute(t):!1}get(t){return this._parent.element instanceof HTMLElement||this._parent.element instanceof Element?this._parent.element.getAttribute(t):null}}const pe=n=>n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,e)=>(e?"-":"")+t.toLowerCase()),it=document.createElement("template"),V={};document.createElement("template");function B(n,t){switch(typeof n){case"string":return n==="svg"||n==="path"||n==="g"||n==="defs"||n==="polygon"||n==="linearGradient"||n==="stop"||t==!0?document.createElementNS("http://www.w3.org/2000/svg",n,{}):n==="text"?document.createTextNode(""):n==="fragment"?null:n.startsWith("<")?(it.innerHTML=n.toString(),it.content.firstChild):(V[n]||(V[n]=document.createElement(n)),V[n].cloneNode(!0));default:return n}}class ge{constructor(t){this._parent=t}add(t){var e=t;return typeof e=="function"&&(e=e()),Array.isArray(e)?e.forEach(i=>{typeof i=="object"?Reflect.ownKeys(i).forEach(s=>{typeof i[s]!="function"&&(i[s]?(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(s.toString().trim()):(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(s.toString().trim())),typeof i[s]=="function"&&this._parent.bind.effect(()=>{i[s]()?(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(s.toString().trim()):(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(s.toString().trim())})}):i.trim().split(" ").forEach(s=>{(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(s.trim())})}):typeof e=="object"?Reflect.ownKeys(e).forEach(i=>{typeof e[i]!="function"&&(e[i]?(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(i.toString().trim()):(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(i.toString().trim())),typeof e[i]=="function"&&this._parent.bind.effect(()=>{e[i]()?(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(i.toString().trim()):(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(i.toString().trim())})}):typeof e=="string"&&e.trim().split(" ").forEach(i=>{(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.add(i.trim())}),this._parent}remove(t){if(Array.isArray(t))t.forEach(e=>{e.trim().split(" ").forEach(i=>{(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(i.trim())})});else if(t=="**"){if(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)for(let e=this._parent.element.classList.length;e>-1;e--)this._parent.element.classList.item(e)&&this._parent.element.classList.remove()}else t.trim().split(" ").forEach(e=>{(this._parent.element instanceof HTMLElement||this._parent.element instanceof Element)&&this._parent.element.classList.remove(e.trim())});return this._parent}has(t){return this._parent.element instanceof HTMLElement||this._parent.element instanceof Element?this._parent.element.classList.contains(t.trim()):!1}}class ve{constructor(t){this._parent=t}set(t){return typeof t=="object"?(Reflect.ownKeys(t).forEach(e=>{if(typeof t[e]!="function"&&this._parent.element instanceof HTMLElement){var i=e.toString().split(":");this._parent.element.style[i[0]]=i[1]}}),this._parent.bind.effect(()=>{Reflect.ownKeys(t).forEach(e=>{if(typeof t[e]=="function"&&this._parent.element instanceof HTMLElement){var i=e.toString().split(":");this._parent.element.style[i[0]]=i[1]}})})):typeof t=="string"&&t.split(";").forEach(e=>{if(this._parent.element instanceof HTMLElement){var i=e.split(":");this._parent.element.style[i[0]]=i[1]}}),this._parent}}class st{static GC(t){return Object.keys(t).forEach(e=>{delete t[e]}),null}}var _e=0;const me=document.createComment("");class T{constructor(t,e){this.props=null,this._initprops=!1,this._={placeholder:me.cloneNode(!0),isMainComponent:!1,isContainer:!1,waitInit:!1,waitState:!1,isInited:!1,viewInit:!1,on:new Set,isHidden:!1,replacedHidden:!1,instanced:!1,initializing:{wait:()=>!this._.waitInit&&this._.waitState===!1&&this.bind.Configuration.WaitSettings&&this.bind.waitDirective?(this.parent._.methods.AppendElement(this),this.hide(),this._.waitState=!0,this._.waitInit=!0,this.bind.waitDirective.init(this.bind.Configuration.WaitSettings,this),!0):!1},event:{onbuilding:()=>{this._.isInited===!1&&this.onbuilding&&this.onbuilding(this),this._.isInited||this.intervention&&this.intervention.onbuilding&&this.intervention.onbuilding(this)},oncreating:()=>{this.oncreating&&this.oncreating(this),this.intervention&&this.intervention.oncreating&&this.intervention.oncreating(this)},preconfig:()=>{this.preconfig&&this.preconfig(this),this.intervention&&this.intervention.preconfig&&this.intervention.preconfig.call(this)}},methods:{addNodes:()=>{this.nodes&&this.nodes.forEach(s=>{s&&this.controls.add(s)})},addSlots:()=>{var s=this._.methods.findSlotNodes(this);s&&s.length>0&&(s.forEach((r,o)=>{if(r.props&&r.props.Name){var a=this.slots.find(l=>l.attr.get("slot")===r.attr.get("name"));a&&(a.attr.remove("slot"),r.controls.add(a))}}),this.slots&&s.forEach((r,o)=>{if(!r.props||!r.props.Name){var a=this.slots.filter(l=>!l.attr.has("slot"));a&&a.length>0&&a.forEach(l=>{r.controls.add(l)})}})),this.parent},findSlotNodes:s=>{var r=[];return s.controls.filter(o=>o.props&&o.props.isSlot).forEach(o=>{r.push(o);var a=s._.methods.findSlotNodes(o);a&&a.length>0&&r.push(...a)}),r},runSetup:()=>{this.setup&&this.setup.call(this),this.intervention&&this.intervention.setup&&(this._.isMainComponent?this.controls.length>0&&this.controls.forEach(s=>{s.intervention?s.intervention.setup=this.intervention.setup:s.intervention={setup:this.intervention.setup}}):this.intervention.setup.call(this)),this.context.extensions.forEach((s,r,o)=>{Reflect.ownKeys(s).forEach(a=>{s[a].componentInit&&s[a].componentInit(this)})})},waiterFr:document.createDocumentFragment(),waiterin:null,AppendElement:s=>c(this,void 0,void 0,function*(){var r,o,a,l=0;if(s.isStart){s.isStart=!1,this._.methods.waiterFr.appendChild(s.element),window.clearTimeout(this._.methods.waiterin);var h=this;this._.methods.waiterin=window.setTimeout(()=>{var m,A;(A=(m=h.element)===null||m===void 0?void 0:m.parentElement)===null||A===void 0||A.insertBefore(this._.methods.waiterFr,h.element)},1)}else if(s.insertTo!==null&&s.insertTo!==void 0?l=s.insertTo:s.toFirst!==null&&s.toFirst!==void 0&&(l=0),this._.isMainComponent){if(this.element.isConnected||this.parent._.methods.AppendElement(this),this.element&&this.element.parentElement&&this.element.parentElement.childNodes){const m=Array.prototype.slice.call((o=(r=this.element)===null||r===void 0?void 0:r.parentElement)===null||o===void 0?void 0:o.childNodes);var u=this.controls.filter(A=>A.isRendered).length;s.insertTo<0&&(s.insertTo=0);var d=m.indexOf(this.element)-u+s.insertTo,S=m[d];S||(S=this.element),(a=this.element.parentElement)===null||a===void 0||a.insertBefore(s.element,S)}}else{var E=this.element.childNodes.item(l);if(E===null)try{this.element.appendChild(s.element)}catch(m){console.error("MOVI:"+m,this,s)}else if(this.isFragment)this.parent.controls.add(s.element);else try{this.element!==s.element?this.element.appendChild(s.element):this.element.insertBefore(s.element,E)}catch(m){console.warn("MOVI:",m)}}}),clearMainSubsicribers:null,addEnterTransition:()=>c(this,void 0,void 0,function*(){var s,r,o=this;if(((r=(s=o.settings)===null||s===void 0?void 0:s.transition)===null||r===void 0?void 0:r.name)&&o.settings.transition.name!==""){var a=o.settings.transition.name;o.class.remove([`${a}-leave`,`${a}-leave-end`]),o.class.add([`${a}-enter`,`${a}-enter-start`])}}),addLeaveTransition:()=>c(this,void 0,void 0,function*(){var s,r,o=this;if(((r=(s=o.settings)===null||s===void 0?void 0:s.transition)===null||r===void 0?void 0:r.name)&&o.settings.transition.name!==""){var a=o.settings.transition.name;o.class.remove([`${a}-enter`,`${a}-enter-start`]),o.class.add([`${a}-leave`,`${a}-leave-end`])}}),addMoveTransition:()=>c(this,void 0,void 0,function*(){var s,r;if(((r=(s=this.settings)===null||s===void 0?void 0:s.transition)===null||r===void 0?void 0:r.name)&&this.settings.transition.name!==""){var o=this.settings.transition.name;this.class.remove([`${o}-enter`,`${o}-enter-start`,`${o}-leave`,`${o}-leave-end`]),this.class.add([`${o}-move`])}}),waitTransition:s=>c(this,void 0,void 0,function*(){var r,o;this._.methods,((o=(r=this.settings)===null||r===void 0?void 0:r.transition)===null||o===void 0?void 0:o.name)&&this.settings.transition.name!==""&&s!==""&&this.settings.transition.name}),_oldDelayer:null,delay:(s,r)=>c(this,void 0,void 0,function*(){var o=this._.methods;return window.clearTimeout(o._oldDelayer),new Promise(a=>{o._oldDelayer=window.setTimeout(()=>{a(),r&&r()},s)})}),remove:()=>{var s,r;this.element&&(this.element instanceof Text?this.element.remove():this.element instanceof Element?this.element.remove():this.element instanceof DocumentFragment?(s=this.element.firstChild)===null||s===void 0||s.remove():this.element instanceof HTMLTemplateElement?(r=this.element.content.firstChild)===null||r===void 0||r.remove():this.element.remove())}},tempContent:null,eventHandlers:new et,modelInstances:new Set},this._iswait=!1,this.bind=new he(this),this.isFragment=!1,this.context=p.current,this.controls=new et,this._parent=null,this.element=null,this.attr=new de(this),this.class=new ge(this),this.isRendered=!1,this.isDisposed=!1,this.isConnected=!1,this.autostyle=new ve(this);var i=this;this.context.extensions.size>0&&this.context.extensions.forEach((s,r,o)=>{delete s.props;var a=Object.assign({},s);typeof a=="function"&&(a=a.bind(i)),Reflect.ownKeys(a).forEach(l=>{typeof a[l]=="function"&&(a[l]=a[l].bind(i))}),Reflect.ownKeys(a).forEach(l=>{a[l].run&&a[l].run(i)}),Object.assign(i,a)},this),e!=null&&Object.keys(e).forEach(s=>{this[s]=e[s]}),t==null?(this._.isMainComponent=!0,this._.isContainer=!0,this.element=document.createComment("REF#"+_e++)):this.element=t,this._.event.oncreating(),this._.event.preconfig(),this.onconfig&&this.onconfig(this),this.intervention&&this.intervention.onconfig&&(this.intervention.onconfig=this.intervention.onconfig.bind(this),this.intervention.onconfig.call(this)),this._.methods.clearMainSubsicribers=this.context.internal.subscribe("routeChanged",()=>{this.onRouteChanged&&!this.isDisposed&&this.onRouteChanged.call(this,this)}),this.controls.ItemAdded=s=>{if(this.isRendered)if(Array.isArray(s))s.forEach(r=>{r.insertTo=this.controls.length-1,r.parent=this;try{r.build()}catch{debugger}});else{s.insertTo=this.controls.length-1,s.parent=this;try{s.build()}catch{debugger}}},this.controls.ItemAddedBefore=s=>{this.isRendered&&(s.insertTo=0,s.parent=this,s.build())},this.controls.ItemSplice=(s,r)=>{this.isRendered&&(r.insertTo=s,r.parent=this,r.build())},this.oncreated&&this.oncreated(this),this._.instanced=!0}get iswait(){return this._iswait===!0&&this.isRendered&&this.hide(),this._iswait}set iswait(t){this._iswait=t,t===!1?(this.build(),this.show()):this.isRendered&&this.hide()}hook(t,e){var i=this;t==="router"&&this.onRouteChanged&&(this.onRouteChanged=this.onRouteChanged.bind(i),this.onRouteChanged(i))}add(t){this.controls.add(t)}setText(t){this._.isMainComponent||(this.element.textContent=t)}setTempContent(t){var e;this._tempContent=t,t.isRendered||t.build(),this._.isMainComponent?(e=this.element.parentElement)===null||e===void 0||e.replaceChild(this.element,t.element):this.element.appendChild(t.element)}handleDispose(t){throw new Error("Method not implemented.")}get parent(){return this._parent}set parent(t){this._parent=t,this.onmounted&&this.onmounted(this)}build(t){return c(this,void 0,void 0,function*(){if(this.props&&this.props.container){var e;typeof this.props.container=="function"?e=this.props.container():e=this.props.container,typeof e=="string"?t=document.getElementsByTagName(e)[0]:e instanceof Element&&(t=e)}if(this.isRendered){this.controls.filter(r=>r.isRendered===!1||r.isRendered===void 0||r.isRendered===null).forEach((r,o)=>{if(Array.isArray(r))r.forEach(a=>{a.parent=this;try{a.insertTo=o,a.build()}catch(l){console.error("Build Error",l)}});else try{r.insertTo=o,r.parent=this,r.build()}catch(a){console.error("Build Error",a)}});return}const i=r=>c(this,void 0,void 0,function*(){if(r._.isInited==!1&&r.intervention&&r.intervention.preconfig&&r.intervention.preconfig.call(r),r._.isInited=!0,!r._.initializing.wait()&&!r.iswait){if(r._.event.onbuilding(),r._.methods.addNodes(),t?t.append(r.element):r.parent&&r.parent._.methods.AppendElement(this),r.view&&!r._.viewInit){r.view=r.view.bind(r);var o=r.view?yield r.view.call(r,r):null;if(r._.viewInit=!0,o!=null){if(Array.isArray(o))o.forEach(l=>{r.controls.add(l)});else if(o instanceof T)o&&o.nodes&&o.nodes.forEach(l=>{l&&l.element&&o&&o.controls.add(l)}),r.controls.add(o);else{o.view&&(o.view=o.view.bind(r));var a=r.view?yield r.view.call(r,r):null;Array.isArray(a)?a.forEach(l=>{r.controls.add(l)}):(a instanceof T&&a&&a.nodes&&a.nodes.forEach(l=>{l&&l.element&&o&&o.controls.add(l)}),r.controls.add(o))}if(r._.initializing.wait()||r.iswait)return}}r._.methods.runSetup(),r._.tempContent&&r._.tempContent.dispose(),r.controls.forEach((l,h)=>{if(Array.isArray(l))l.forEach(u=>{u.parent=r;try{u.insertTo=h,u.build()}catch(d){console.error("Build Error",d)}});else try{l.insertTo=h,l.parent=r,l.build()}catch(u){console.error("Build Error",u)}}),r.isRendered=!0,r.bind.init(),r.onbuilded&&r.onbuilded(this),r.intervention&&r.intervention.onbuilded&&r.intervention.onbuilded.call(r),this._.methods.addSlots()}});var s=this;this._.isInited?i(s):this.interrupt?this.interrupt(this,function(){return c(this,void 0,void 0,function*(){self.intervention&&self.intervention.interrupt?self.intervention.interrupt(self,function(){return c(this,void 0,void 0,function*(){i(s)})}):i(s)})}):i(s)})}wait(){throw new Error("Method not implemented.")}dispose(t){return c(this,void 0,void 0,function*(){if(this.isDisposed!=!0){this._.on&&(this._.on.forEach(i=>i()),this._.on.clear()),this.ondisposing&&this.ondisposing(this),this._.methods.clearMainSubsicribers&&this._.methods.clearMainSubsicribers(),this.bind.dispose();var e=this;e.nodes&&(yield e.nodes.forEach(i=>c(this,void 0,void 0,function*(){i.dispose()}))),this._.methods.addLeaveTransition(),yield this._.methods.waitTransition("leave"),this.isDisposed||(this._.methods.remove(),this.context.ControlCollection.delete(this),e.controls._map.forEach(i=>c(this,void 0,void 0,function*(){this._.isMainComponent||this.element instanceof Comment?i.dispose():i.flush()})),this.controls.clear(),e.parent&&!e.parent.isDisposed&&e.parent.controls.remove(e),e.controls.clear(),this.model&&this.context.clearModel(this.model),this._.modelInstances.forEach(i=>{this.context.clearModel(i)}),st.GC(e),this.isDisposed=!0),this.ondisposed&&this.ondisposed(this)}})}flush(){return c(this,void 0,void 0,function*(){if(!this.isDisposed){this.bind.dispose(),this._.on&&(this._.on.forEach(e=>e()),this._.on.clear()),this._.methods.clearMainSubsicribers&&this._.methods.clearMainSubsicribers(),this.controls.forEach(e=>c(this,void 0,void 0,function*(){Array.isArray(e)?yield e.forEach(i=>c(this,void 0,void 0,function*(){i.flush()})):e.flush()}));var t=this;t.parent&&this.context.ControlCollection.delete(this),t.parent&&t.parent.isDisposed,t.controls.clear(),this.model&&this.context.clearModel(this.model),this._.modelInstances.forEach(e=>{this.context.clearModel(e)}),st.GC(this),this.isDisposed=!0}})}clear(){return c(this,void 0,void 0,function*(){return new Promise(t=>{this.controls.forEach((e,i)=>c(this,void 0,void 0,function*(){yield e.dispose(),this.controls.clear(),i===this.controls.length-1&&window.setTimeout(t,0)}))})})}show(){return c(this,void 0,void 0,function*(){this._.isMainComponent?this.controls.forEach(t=>{t.show()}):(this._.methods.addEnterTransition(),this._.methods.waitTransition("enter"),this.isRendered&&this._.isHidden==!0?(this._.isHidden=!1,this._.replacedHidden&&!this.parent?document.body.appendChild(this.element):!this.parent||this.parent.element==null?document.body.replaceChild(this.element,this._.placeholder):this._.placeholder.parentNode&&this._.placeholder.parentNode.replaceChild(this.element,this._.placeholder),this._.methods.addEnterTransition(),this._.methods.waitTransition("enter")):this._.isHidden=!1)})}hide(){var t;return c(this,void 0,void 0,function*(){this._.isMainComponent?this.controls.forEach(e=>{e.hide()}):this.isRendered&&this._.isHidden==!1?(this._.isHidden=!0,this._.methods.addLeaveTransition(),yield this._.methods.waitTransition("leave"),!this.parent||!this.parent.element?document.body.replaceChild(this._.placeholder,this.element):this.element.parentNode!=null&&this.element.parentNode.replaceChild(this._.placeholder,this.element)):(this._.replacedHidden=!0,this._.isHidden=!0,(t=this.element.parentNode)===null||t===void 0||t.replaceChild(this._.placeholder,this.element))})}on(t,e,...i){this._.on.add(this.context.on(t,e)),i.length>0&&e(...i)}addHandler(t,e){if(this.element===null||this.element===void 0)return this;var i=t.trim(),s=this;return i.split(" ").forEach(r=>{var o=".";r.indexOf("-")>-1?o="-":r.indexOf(":")>-1&&(o=":");var a=r.split(o);const l={key:a[0],options:{once:!1,capture:!1,passive:!1,prevent:!1,stop:!1,trusted:!1,self:!1},value:h=>{var u;l.options.trusted===!0&&!h.isTrusted||l.options.self&&h.target!==s.element||(a.length>1&&h instanceof KeyboardEvent?((u=h.key)===null||u===void 0?void 0:u.toLowerCase())==a[1].toLowerCase()&&(l.options.prevent===!0&&h.preventDefault(),l.options.stop===!0&&h.stopPropagation(),e(s,h)):(l.options.prevent===!0&&h.preventDefault(),l.options.stop===!0&&h.stopPropagation(),e(s,h)))}};for(let h=2;h<=a.length;h++)switch(a[h]){case"once":l.options.once=!0;break;case"passive":l.options.passive=!0;break;case"prevent":l.options.prevent=!0;break;case"stop":l.options.stop=!0;break;case"trusted":l.options.trusted=!0;break}this._.eventHandlers.add(l);try{this.element.addEventListener(l.key,l.value,l.options)}catch{console.error(this);debugger}}),this}removeHandler(t){var e=t.trim();return e.split(" ").forEach(i=>{var s=".";i.indexOf("-")>-1?s="-":i.indexOf(":")>-1&&(s=":");var r=i.split(s),o=this._.eventHandlers.find(a=>a.key==r[0]);o!=null&&this._.eventHandlers.remove(o)}),this}style(t){return this.element instanceof HTMLElement&&Object.entries(t).forEach(e=>{this.element.style[pe(e[0])]=e[1]}),this}using(t,e,i){t.then(s=>{this&&!this.isDisposed&&e&&e(s)},s=>{this&&!this.isDisposed&&i&&i(s)})}registerStyle(t){throw new Error("Method not implemented.")}get model(){if(!this.isDisposed&&this.context&&this.context.useModel!==void 0)return this.context.useModel(this._model);console.warn(this)}set model(t){this._model=this.context.useModel(t)}useModel(t){var e=this.context.useModel(t);return this._.modelInstances.add(e),e}}class f extends T{constructor(){var t,e;if(t!==void 0&&typeof t=="function"){var i=t(e);super(i.element,i)}else{if(arguments.length===1){var s=arguments[0];typeof s=="object"&&!(s instanceof Element)?s&&(e=s):t=s}else arguments.length===2&&(t=arguments[0],arguments[1]&&(e=arguments[1]));var r=()=>{};t==null&&e==null?super(t,e):t===void 0&&e!==void 0?super(B(t),e):t&&!e?(super(B(t),e),r()):t&&e&&(super(B(t,e.__isSvgElement),e),r())}}}function ye(n,t){var e=new T(null,{});return n instanceof Promise&&e.using(n,i=>{e.controls.add(H(i.default,t))}),e}const we=new Set;we.add("movicompoent");function nt(n,t){return typeof n=="string"||n instanceof Element?n instanceof HTMLSlotElement||n==="slot"?(t&&t.props?t.props.isSlot=!0:t=Object.assign(Object.assign({},t),{props:{isSlot:!0}}),H(null,Object.assign({},t))):n instanceof HTMLUnknownElement?H("div",t):typeof n=="function"?new f(Object.assign({view:()=>n},t)):new f(n,t):H(n,t)}function H(n,t){var e;const i=Object.assign({},{context:p.current});if(Array.isArray(n))e=n[0];else if(n instanceof f)e=n;else if(typeof n=="function")try{var s=n;if(s instanceof f||s.prototype&&s.prototype instanceof f){var r=t.props;delete t.props,e=new s(Object.assign(Object.assign({},r),t)),e.props=r,r&&Object.keys(r).forEach(a=>{})}else if(typeof s=="object")e=new f(Object.assign(Object.assign(Object.assign({},s),i),t));else{var o;try{o=new n(Object.assign(Object.assign({},i),t))}catch{o=n()}o instanceof Promise?e=ye(o,t):e=new f(Object.assign({view:()=>o},t))}}catch{e=new n(i),e.bind||(e=Object.assign(e,new f(t)))}else e=new f(Object.assign(Object.assign(Object.assign({},n),i),t));return e}class rt{constructor(){this.extend={}}}class U extends f{constructor(){super(document.createComment(""),{settings:{isFrame:!0}}),this.current=null,this.isBusy=!1,this.isNavigated=!1,this.currentUri="",this.isFragment=!0}onmounted(t){t.context.ControlCollection.has(t.parent)&&t.context.ControlCollection.delete(t.parent),t.context.ControlCollection.set(t.parent,t)}dispose(){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return c(this,void 0,void 0,function*(){this.context.ControlCollection.delete(this.parent),this.context.ControlCollection.delete(this),this.current!=null&&(yield this.current.dispose()),yield t.dispose.call(this)})}flush(){const t=Object.create(null,{flush:{get:()=>super.flush}});return c(this,void 0,void 0,function*(){this.current!=null&&this.current.dispose(),t.flush.call(this)})}clear(){const t=Object.create(null,{clear:{get:()=>super.clear}});return c(this,void 0,void 0,function*(){this.current!=null&&this.current.dispose(),t.clear.call(this)})}navigate(t){return c(this,void 0,void 0,function*(){if(t!=null&&this.isBusy!=!0&&!(this.current!==null&&this.current===t)){this.isBusy=!0,t.parent=this.parent,this.current!=null&&(yield this.current.dispose()),this.current=t,p.current.lastPage=t;try{t.build(),t.nodes?t.nodes.forEach(e=>c(this,void 0,void 0,function*(){e.parent=this,this.parent.element.insertBefore(e.element,this.element),e.isRendered||e.build()})):this.parent.element.insertBefore(t.element,this.element)}catch(e){console.error(e)}this.currentUri=t.context.route.path,this.isNavigated=!0,this.isBusy=!1}})}}class be{constructor(t){this.values=null,this.prev="__boot__",this._mode="history",this.root="/",this._skipCheck=!1,this.HandleChange=null,this.Handlers=new Set,this.mode="history",this.HandlePopChange=this.HandlePopChange.bind(this),this.HandleHashChange=this.HandleHashChange.bind(this),this.navigate=this.navigate.bind(this),this.manager=t}value(t){var e;return(e=this.values.filter(i=>i.name==t)[0])===null||e===void 0?void 0:e.value}set mode(t){this._mode=t,this.removeUriListener(),this.addUriListener()}get mode(){return this._mode}onChange(t){this.Handlers.has(t)||this.Handlers.add(t)}offChange(t){this.Handlers.delete(t)}trigger(t){return c(this,void 0,void 0,function*(){if(this.prev!==t){var e=this.manager.GetRouteDetails(t),i=new fe;i.currentPage=p.current.lastPage,i.route={path:t,extend:e.extend,params:e.params,name:e.name,tree:e.tree};var s=this;const r=function(){return c(this,void 0,void 0,function*(){var o=i.route?i.route.path:"/";i.redirect!==""&&s.manager.routeNames.has(i.redirect)&&(o=s.manager.routeNames.get(i.redirect).path);var a=s.manager.GetRouteDetails(o),l={path:o,extend:a.extend,params:a.params,name:a.name,tree:a.tree};p.current.route=l,yield s.manager.GetController(o,()=>{s.navigate(o)}),p.current.internal.notify("routeChanged")})};this.gate?this.gate(()=>c(this,void 0,void 0,function*(){yield r()}),i):r()}})}navigate(t){this.mode==="history"?window.history!=null&&(t.startsWith("/")||(t="/"+t),this.prev=t,window.history.pushState({},"",t)):this.prev!==t&&(this.prev=t,window.location.hash=t)}HandlePopChange(){this.trigger(this.CurrentPage)}HandleHashChange(){this.trigger(this.CurrentPage)}get CurrentPage(){return this.getFragment()}addUriListener(){return this.mode==="history"?window.addEventListener("popstate",this.HandlePopChange.bind(this)):window.addEventListener("hashchange",this.HandleHashChange.bind(this)),this}removeUriListener(){return window.onpopstate=null,window.onhashchange=null,this}_getHistoryFragment(){var t=decodeURI(window.location.pathname+window.location.search);return this.root!=="/"&&(t=t.replace(this.root,"")),this._trimSlashes(t)}_getHashFragment(){var t=window.location.hash.substring(1).replace(/(\?.*)$/,"");return t.startsWith("/")||(t="/"+t),this._trimSlashes(t)}getFragment(){var t;return this.mode==="history"?t=this._getHistoryFragment():t=this._getHashFragment(),t}isChanged(){var t=this.previouspath!=this.getFragment();return this.previouspath=this.getFragment(),t}_trimSlashes(t){if(typeof t!="string")return"";var e=t.toString().replace(/\/$/,"").replace(/^\//,"");return e.startsWith("/")||(e="/"+e),e}}class ot{constructor(t){this.source=t,this.currentColumn=0,this.tokens=[],this.parameters={},this.codePointAt=String.prototype.codePointAt?(e,i)=>e.codePointAt(i):function(i,s){const r=i.length;if(s<0||s>=r)return;const o=i.charCodeAt(s);if(o>=55296&&o<=56319&&r>s+1){const a=i.charCodeAt(s+1);if(a>=56320&&a<=57343)return(o-55296)*1024+a-56320+65536}return o},this.tokens=[]}AddToken(t){this.tokens.push(t)}parse(){this.source.startsWith("/")||(this.source="/"+this.source);for(var t="static",e=-1,i=0,s=-1;this.currentColumn<this.source.length;){var r=this.codePointAt(this.source,this.currentColumn),o=this.tokens[e];switch(r){case 47:s++,(o===void 0||o.input.length>1)&&(this.tokens.push({default:"",input:"/",isOptinal:!1,regexs:[],type:"static",parameterName:"",parameterIndex:i,sectionIndex:s}),e=this.tokens.length-1);break;case 123:i++,this.tokens.push({default:"",input:"",isOptinal:!1,regexs:[],type:"parameter",parameterName:"",parameterIndex:i,sectionIndex:s}),e=this.tokens.length-1,t="parameter";break;case 125:t="static",e=-1;break;case 58:t="defaultValue";break;case 63:o.isOptinal=!0;break;default:o&&(t==="parameter"?o.parameterName=`${o.parameterName+this.source[this.currentColumn]}`:t==="defaultValue"?o.default=`${o.default+this.source[this.currentColumn]}`:o.input=`${o.input+this.source[this.currentColumn]}`);break}this.currentColumn++}var a="";return this.tokens.forEach(l=>{l.isOptinal?a=a+l.input+`?([\\w\\d\\_\\-\\%\\&\\$\\+\\#\\,\\.\\{\\}\\(\\)\\[\\]\\?\\:\\=\\;\\'"\\~\\\\]*)`:l.type==="parameter"?a=a+l.input+`([\\w\\d\\_\\-\\%\\&\\$\\+\\#\\,\\.\\{\\}\\(\\)\\[\\]\\?\\:\\=\\;\\'"\\~\\\\]{1,255})`:l.type==="static"&&(a===""?a=l.input:a=a+l.input)}),new RegExp(a,"g")}filterHtml(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText}exist(t){var e=this.parse(),i=e.exec(t);if(i){i&&i.length;var s=[];if(this.parameters={},i==null||i.forEach((a,l)=>{s.push(a)}),window.location.href.indexOf("?"),new URLSearchParams(window.location.search).forEach((a,l)=>{this.parameters[l]=this.filterHtml(a)}),i.input===s[0]){i==null||i.forEach((a,l)=>{if(l!==0){var h=this.tokens.find(u=>u.parameterIndex==l);h&&(this.parameters[h.parameterName]=a||h.default)}});var r=new MessageEvent("message",{data:{type:"router",parameters:this.parameters,path:i.input,tokens:this.tokens}});return window.dispatchEvent(r),!0}}return!1}}class Ce{constructor(){this.routes=new Map,this.routeNames=new Map,this.router=new be(this),this.params={},this.singleShot=!1}get(t){return this.routeNames.get(t)}add(t){t.path==""&&(t.path="/"),t.path=this._trimSlashes(t.path);var e=new rt;e.control=t.control,e.path=this._trimSlashes(t.path),e.parent=void 0,e.isDefault=!1,e.instances={layout:null,control:null},e.extend=t.extend,e.onShow=t.onShow,e.name=t.name,e.name&&this.routeNames.set(e.name,e),this.routes.set(t.path,e),this.AddChildNode(t,t.childs,this._trimSlashes(t.path),e)}_trimSlashes(t){if(typeof t!="string")return"";var e=t.toString().replace(/\/$/,"").replace(/^\//,"");return e.startsWith("/")||(e="/"+e),e}AddChildNode(t,e,i,s){e==null||e.forEach(r=>{var o=i+r.path;o=this._trimSlashes(o),r.path=this._trimSlashes(r.path);var a=new rt;a.control=r.control,a.layout=t.control,a.path=r.path,a.ParentPath=o,a.parent=s,a.isDefault=!1,a.instances={layout:null,control:null},a.extend=r.extend,a.onShow=r.onShow,a.name=r.name,r.path=="/"&&(s.firstChild=r.control),this.routes.has(o)||(a.name&&this.routeNames.set(a.name,a),this.routes.set(o,a)),r.childs&&r.childs.length>0&&this.AddChildNode(r,r.childs,o,a)})}deepsearch(t){var e;if(t){if(t&&t.isDisposed)return e}else return e;var i;return Array.isArray(t)?t.forEach(s=>{i!=null&&i!=null&&(i=s.controls.filter(r=>r instanceof U&&!r.isDisposed))}):i=t.controls.filter(s=>s instanceof U&&!s.isDisposed),i&&i.length>0?e=i[0]:Array.isArray(t)?t.forEach(s=>{s.controls.forEach(r=>{e!=null&&e!=null&&(e=this.deepsearch(r))})}):t.controls.forEach(s=>{e=this.deepsearch(s)}),e}findBody(t){var e=null,i=this;return Array.isArray(t)?t.forEach(s=>{s&&!s.isDisposed&&(s.context.ControlCollection.has(s)?e=t.context.ControlCollection.get(s):s.controls.forEach(r=>{var o=i.findBody(r);o&&(e=o)}))}):t.context.ControlCollection.has(t)?e=t.context.ControlCollection.get(t):t.controls.forEach(s=>{var r=i.findBody(s);r&&(e=r)}),e}start(){this.router.trigger(this.router.CurrentPage)}CreateObject(t){return c(this,void 0,void 0,function*(){var e=t;e instanceof Promise&&(e=yield e.then(a=>(e=a.default,a.default))),Object.prototype.toString.call(t)==="[object Module]"&&(e=t.default);var i,s={context:p.current};if(typeof e=="function"){if(e.prototype instanceof f||e instanceof f)i=new e;else if(e.prototype&&typeof e.prototype.constructor=="function")try{e.prototype.constructor?i=new f({view:a=>new e(a)}):i=new f({view:e})}catch{try{i=new e(s)}catch{i=e({context:p.current})}}else try{i=new e(s)}catch{i=e(s)}if(i instanceof Promise&&(i=yield i.then(a=>(i=a.default,a.default))),i.prototype&&typeof i.prototype.constructor=="function")try{typeof i.prototype.add=="function"?i=new i(null,null):i=new f({view:i})}catch{i=new i(s)}var r=i instanceof f;return r||(i=yield i,i=new f(Object.assign(Object.assign({},i),s))),i}else{var o=new f(e.tag?e.tag:"div",e);return o}})}startBuild(t){var e;return c(this,void 0,void 0,function*(){if(t.parent!=null&&(yield this.buildmap(t.parent)),(t.instances.control==null||t.instances.control.isDisposed)&&((e=t.instances.control)===null||e===void 0||e.dispose(),t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook&&t.instances.control.hook("router",t)),t.instances.control.bind||(t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook&&t.instances.control.hook("router",t)),t.instances.control.activating&&t.instances.control.activating(),t.parent==null){var i=yield this.findBody(p.current.MainPage);yield i.navigate(t.instances.control),t.instances.control.activated&&t.instances.control.activated()}else{var s=yield this.findBody(t.parent.instances.control);s==null||(t.instances.control||(t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook&t.instances.control.hook("router",t)),t.instances.control.bind||(t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook&&t.instances.control.hook("router",t)),t.instances.control&&t.instances.control.activated&&t.instances.control.activated(),yield s.navigate(t.instances.control))}if(t.firstChild){var r=yield this.findBody(t.instances.control),o=yield this.CreateObject(t.firstChild);o.activating!=null&&o.activating(),r&&(yield r.navigate(o),o.activated!=null&&o.activated())}return!1})}buildmap(t){var e,i;return c(this,void 0,void 0,function*(){t.parent!=null&&(yield this.buildmap(t.parent)),t.parent!=null&&(t.parent.instances.control==null||t.parent.instances.control.isDisposed)&&((e=t.parent.instances.control)===null||e===void 0||e.dispose(),t.parent.instances.control=yield this.CreateObject(t.parent.control),t.parent.instances.control.hook("router",t.parent),t.parent.instances.control.activating&&t.parent.instances.control.activating()),(t.instances.control==null||t.instances.control.isDisposed)&&((i=t.instances.control)===null||i===void 0||i.dispose(),t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook("router",t)),t.instances.control.bind||(t.instances.control=yield this.CreateObject(t.control),t.instances.control.hook("router",t)),t.instances.control&&t.instances.control.activating&&t.instances.control.activating(),t.parent==null?(t.instances.body=this.findBody(p.current.MainPage),yield t.instances.body.navigate(t.instances.control),t.instances.control.activated&&t.instances.control.activated()):(t.instances.body=this.findBody(t.parent.instances.control),yield t.instances.body.navigate(t.instances.control),t.instances.body.activated&&t.instances.body.activated(),t.instances.control.activated&&t.instances.control.activated()),t.isLatestPage=!1})}GetController(t,e){return c(this,void 0,void 0,function*(){var i=window.location.href.indexOf("?");new URLSearchParams(window.location.href.substring(i));var s,r,o=t.split("?")[0];const a=Array.from(this.routes.keys());var l=!1;return yield a.map(h=>c(this,void 0,void 0,function*(){if(!l){var u=new ot(h),d=u.exist(o);if(d){l=!0;var S=this.routes.get(h);return this.params=u.parameters,yield this.startBuild(S),!0}return!1}})),e(),{control:s,layout:r}})}GetRouteDetails(t){new URLSearchParams(window.location.search),this.router.mode!="history"&&t.split("?").length>1&&new URLSearchParams(t.split("?")[1]);var e={},i=t.split("/"),s=[],r={},o="";i.forEach(l=>{l.length>0&&(o=o+"/"+l.split("?")[0],s.push(o))});var a=!1;return this.routes.forEach((l,h)=>{if(!a){var u=new ot(h);this.params={};var d=u.exist(t.split("?")[0]);const S=function(E){E.extend&&Object.keys(E.extend).forEach(m=>{r[m]||(r[m]=E.extend[m])}),E.parent&&S(E.parent)};d&&(a=!0,this.params=u.parameters,r={},S(l),e={extend:r,params:this.params,name:l.name,onShow:l.onShow,tree:s})}}),e}filterHtml(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText}}class Se{constructor(){this._Components=new F,this._services=new F}AddComponent(t,e){var i;e!=""&&e!=null?this._Components.Add(e,t):this._Components.Add((i=t.constructor)===null||i===void 0?void 0:i.name,t)}GetComponent(t){var e;return(e=this._services.find(i=>i.Key==t))===null||e===void 0?void 0:e.value}ImportService(t){t.then(e=>{this.AddService(e,e.name)})}AddService(t,e=""){var i;e!=""?this._services.Add(e,t):typeof t=="function"?t.name==null?(e=t.toString().match(/^function\s*([^\s(]+)/)[1],this._services.Add(e,t)):this._services.Add(t.name,t):this._services.Add((i=t.constructor)===null||i===void 0?void 0:i.name,t)}GetServices(){return this._services}GetService(t){return this._services.filter(e=>e.Key==t.name)[0].value}FindService(t){var e,i=(t==null?void 0:t.toLowerCase())+"";return(e=this._services.filter(s=>{var r;return((r=s.Key)===null||r===void 0?void 0:r.toLowerCase())==i})[0])===null||e===void 0?void 0:e.value}}const D=new F,N=new F;class Ee{constructor(){this.services=new Se,this.extensions=new Set,this.RouteManager=new Ce,this.ControlCollection=new WeakMap,this.state={GarbageCollection:{items:[],add(t){this.items.push(t)},except(){this.items.map(t=>{t.dispose()}),this.items=[]}}},this.store={},this.LifeCycle=new Map,this.internal=new Kt,this.route=null}useModel(t){return Z(t)}clearModel(t){return gt(t),null}on(t,e,...i){return D.has(t)||D.Add(t,new Set),D.item(t).value.add(e),N.has(t)&&e(...N.item(t).value),()=>{D.item(t).value.delete(e)}}send(t,...e){var i,s;N.has(t)&&N.Add(t,e),(s=(i=D.item(t))===null||i===void 0?void 0:i.value)===null||s===void 0||s.forEach(r=>{r(...e)})}watch(t){}use(t){if(Reflect.ownKeys(t).includes("name")){if(!this.extensions.has(t)){Reflect.ownKeys(t).forEach(i=>{typeof t[i]=="function"&&(t[i]=t[i].bind(t))});var e={};e[t.name]=t,this.extensions.add(e),Reflect.ownKeys(t).includes("install")&&(t.install(this),delete t.install)}}else this.extensions.has(t)||this.extensions.add(t)}CreateObject(t,e){var i=t;Object.prototype.toString.call(t)==="[object Module]"&&(i=t.default);var s;if(typeof i=="function"){if(i.prototype instanceof f)s=new i(e);else if(i.prototype&&typeof i.prototype.constructor=="function")try{s=new i.prototype(e)}catch{s=i(e)}else s=i();return s}}}class p{}p.current=new Ee;class xe{constructor(t){this.context=p.current,t&&Object.assign(this,t),this.Configuration&&(this.Configuration=this.Configuration.bind(this)),this.Configuration&&this.Configuration({Route:p.current.RouteManager}),this.ServiceConfiguration&&this.ServiceConfiguration(p.current.services),this.offline&&window.addEventListener("offline",e=>{this.offline&&this.offline(this,e)}),this.online&&window.addEventListener("online",e=>{this.online&&this.online(this,e)})}use(t){p.current.use(t)}offline(t,e){}online(t,e){}Configuration(t){}ServiceConfiguration(t){}Navigate(t){}CreateObject(t){return c(this,void 0,void 0,function*(){var e=t;e instanceof Promise&&(yield t.then(a=>{e=a.default}));var i=e;if(typeof e=="function")if(e.constructor){try{i=new e}catch{try{i=e()}catch{}}var s=i instanceof f;if(!s){var r=new f;i.build=r.build,console.warn(i),Object.assign(i,r)}}else return e();else{var o=new f(e);return o}})}run(t){var e=new f(t,{}),i=new U;e.controls.add(i),p.current.MainPage=e,p.current.MainPage.build(),p.current.RouteManager.start()}_start(t,e){return c(this,void 0,void 0,function*(){p.current.MainPage=t,p.current.MainPage.build(),p.current.RouteManager.start()})}}const De="modulepreload",ke=function(n){return"/"+n},at={},Te=function(t,e,i){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=ke(r),r in at)return;at[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":De,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((u,d)=>{h.addEventListener("load",u),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Ae=[{path:"/",control:()=>Te(()=>import("./home.79c4f04e.js"),[]),name:"home"}];var Me=nt("div",{setup(){const n=nt("text",{setup(){this.setText("NOT FOUND")}});this.controls.add(n)}}),Le=new xe({Configuration(n){this.context.NotFoundPage=Me,n.Route.router.mode="history",n.Route.router.gate=(t,e)=>{t()},Ae.map(t=>{n.Route.add(t)})},ServiceConfiguration:n=>{},online(n,t){},offline(n,t){}});Le.run(document.getElementById("app"));export{nt as m};
